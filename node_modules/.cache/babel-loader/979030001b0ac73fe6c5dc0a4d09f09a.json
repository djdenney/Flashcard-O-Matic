{"ast":null,"code":"import _defineProperty from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useHistory,useParams}from\"react-router-dom\";import{createCard,readDeck}from\"./utils/api/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AddCard(){var _useParams=useParams(),deckId=_useParams.deckId;var history=useHistory();var initialState={front:\"\",back:\"\"};var _useState=useState(initialState),_useState2=_slicedToArray(_useState,2),newCard=_useState2[0],setNewCard=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),deck=_useState4[0],setDeck=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var abortController,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:abortController=new AbortController();_context.prev=1;_context.next=4;return readDeck(deckId,abortController.signal);case 4:response=_context.sent;setDeck(response);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error('Something went wrong',_context.t0);case 11:return _context.abrupt(\"return\",function(){abortController.abort();});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);function handleChange(_ref){var target=_ref.target;setNewCard(_objectSpread(_objectSpread({},newCard),{},_defineProperty({},target.name,target.value)));}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var abortController,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();abortController=new AbortController();_context2.next=4;return createCard(deckId,_objectSpread({},newCard),abortController.signal);case 4:response=_context2.sent;history.go(0);setNewCard(initialState);return _context2.abrupt(\"return\",response);case 8:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}function handleDone(){return _handleDone.apply(this,arguments);}function _handleDone(){_handleDone=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:history.push(\"/decks/\".concat(deckId));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _handleDone.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),children:deck.name})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item active\",children:\"Add Card\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"h2\",{children:[deck.name,\": Add Card\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Front\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"front\",name:\"front\",className:\"form-control\",onChange:handleChange,type:\"text\",value:newCard.front})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Back\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"back\",name:\"back\",className:\"form-control\",onChange:handleChange,type:\"text\",value:newCard.back})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mx-1\",onClick:function onClick(){return handleDone();},children:\"Done\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mx-1\",type:\"submit\",children:\"Save\"})]})]});}export default AddCard;","map":{"version":3,"sources":["/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/src/AddCard.js"],"names":["React","useState","useEffect","Link","useHistory","useParams","createCard","readDeck","AddCard","deckId","history","initialState","front","back","newCard","setNewCard","deck","setDeck","fetchData","abortController","AbortController","signal","response","console","error","abort","handleChange","target","name","value","handleSubmit","event","preventDefault","go","handleDone","push"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Link, useHistory, useParams } from \"react-router-dom\"\nimport { createCard, readDeck } from \"./utils/api/index\"\n\nfunction AddCard () {\n    const {deckId} = useParams()\n    const history = useHistory()\n    const initialState = {\n        front: \"\",\n        back: \"\",\n    }\n\n    const [newCard, setNewCard] = useState(initialState)\n    const [deck, setDeck] = useState({})\n\n    useEffect(() => {\n        async function fetchData() {\n            const abortController = new AbortController()\n            try {\n            const response = await readDeck(deckId, abortController.signal)\n            setDeck(response)\n            } catch (error) {\n                console.error('Something went wrong', error)\n            }\n            return() => {\n                abortController.abort()\n            }\n        }\n        fetchData()\n    }, [])\n    \n    function handleChange({target}) {\n        setNewCard({\n            ...newCard,\n            [target.name]: target.value\n        })\n    }\n\n    async function handleSubmit(event) {\n        event.preventDefault()\n        const abortController = new AbortController()\n        const response = await createCard(deckId, {...newCard}, abortController.signal)\n        history.go(0)\n        setNewCard(initialState)\n        return response\n    }\n\n    async function handleDone() {\n        history.push(`/decks/${deckId}`)\n    }\n\n\n    return (\n        <div>\n            <ol className=\"breadcrumb\">\n                <li className=\"breadcrumb-item\">\n                    <Link to=\"/\">\n                        Home\n                    </Link>\n                </li>\n                <li className=\"breadcrumb-item\">\n                    <Link to={`/decks/${deckId}`}>\n                        {deck.name}\n                    </Link>\n                </li>\n                <li className=\"breadcrumb-item active\">\n                    Add Card\n                </li>\n            </ol>\n            <form onSubmit={handleSubmit}>\n                <h2>\n                    {deck.name}: Add Card\n                </h2>\n                <div className=\"form-group\">\n                    <label>\n                        Front\n                    </label>\n                    <textarea \n                        id=\"front\"\n                        name=\"front\"\n                        className=\"form-control\"\n                        onChange={handleChange} \n                        type=\"text\"\n                        value={newCard.front}\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <label>\n                        Back\n                    </label>\n                    <textarea \n                        id=\"back\"\n                        name=\"back\"\n                        className=\"form-control\"\n                        onChange={handleChange} \n                        type=\"text\"\n                        value={newCard.back}\n                    />\n                </div>\n                <button className=\"btn btn-secondary mx-1\" onClick={() => handleDone()}>\n                    Done\n                </button>\n                <button className=\"btn btn-primary mx-1\" type=\"submit\">\n                    Save\n                </button>\n            </form>\n        </div>\n    )\n}\n\nexport default AddCard"]},"metadata":{},"sourceType":"module"}