{"ast":null,"code":"import _defineProperty from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useHistory,useParams}from\"react-router-dom\";import{readCard,readDeck,updateCard}from\"./utils/api/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditCard(){var _useParams=useParams(),deckId=_useParams.deckId,cardId=_useParams.cardId;var history=useHistory();var initialDeckState={id:\"\",name:\"\",description:\"\"};var initialCardState={id:\"\",front:\"\",back:\"\",deckId:\"\"};var _useState=useState(initialDeckState),_useState2=_slicedToArray(_useState,2),card=_useState2[0],setCard=_useState2[1];var _useState3=useState(initialCardState),_useState4=_slicedToArray(_useState3,2),deck=_useState4[0],setDeck=_useState4[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var abortController,cardResponse,deckResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:abortController=new AbortController();_context.prev=1;_context.next=4;return readCard(cardId,abortController.signal);case 4:cardResponse=_context.sent;_context.next=7;return readDeck(deckId,abortController.signal);case 7:deckResponse=_context.sent;setCard(cardResponse);setDeck(deckResponse);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);console.error('Something went wrong',_context.t0);case 15:return _context.abrupt(\"return\",function(){abortController.abort();});case 16:case\"end\":return _context.stop();}}},_callee,null,[[1,12]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);function handleChange(_ref){var target=_ref.target;setCard(_objectSpread(_objectSpread({},card),{},_defineProperty({},target.name,target.value)));}function handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var abortController,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();abortController=new AbortController();_context2.next=4;return updateCard(_objectSpread({},card),abortController.signal);case 4:response=_context2.sent;history.push(\"/decks/\".concat(deckId));return _context2.abrupt(\"return\",response);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _handleSubmit.apply(this,arguments);}function handleCancel(){return _handleCancel.apply(this,arguments);}function _handleCancel(){_handleCancel=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:history.push(\"/decks/\".concat(deckId));case 1:case\"end\":return _context3.stop();}}},_callee3);}));return _handleCancel.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"ol\",{className:\"breadcrumb\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"breadcrumb-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/decks/\".concat(deckId),children:deck.name})}),/*#__PURE__*/_jsxs(\"li\",{className:\"breadcrumb-item active\",children:[\"Edit Card \",cardId]})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit Card\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Front\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"front\",name:\"front\",className:\"form-control\",onChange:handleChange,type:\"text\",value:card.front})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Back\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"back\",name:\"back\",className:\"form-control\",onChange:handleChange,type:\"text\",value:card.back})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary mx-1\",onClick:function onClick(){return handleCancel();},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary mx-1\",type:\"submit\",children:\"Save\"})]})]});}export default EditCard;","map":{"version":3,"sources":["/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/src/EditCard.js"],"names":["React","useState","useEffect","Link","useHistory","useParams","readCard","readDeck","updateCard","EditCard","deckId","cardId","history","initialDeckState","id","name","description","initialCardState","front","back","card","setCard","deck","setDeck","fetchData","abortController","AbortController","signal","cardResponse","deckResponse","console","error","abort","handleChange","target","value","handleSubmit","event","preventDefault","response","push","handleCancel"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Link, useHistory, useParams} from \"react-router-dom\"\nimport { readCard, readDeck, updateCard} from \"./utils/api/index\"\n\nfunction EditCard () {\n    const { deckId, cardId } = useParams()\n    const history = useHistory()\n    const initialDeckState = {\n        id: \"\",\n        name: \"\",\n        description: \"\"\n    }\n    const initialCardState = {\n        id: \"\",\n        front: \"\",\n        back: \"\",\n        deckId: \"\"\n    }\n\n\n    const [card, setCard] = useState(initialDeckState)\n    const [deck, setDeck] = useState(initialCardState)\n\n    useEffect(() => {\n        async function fetchData() {\n            const abortController = new AbortController()\n            try {\n                const cardResponse = await readCard(cardId, abortController.signal)\n                const deckResponse = await readDeck(deckId, abortController.signal)\n                setCard(cardResponse)\n                setDeck(deckResponse)\n            } catch (error) {\n                console.error('Something went wrong', error)\n            }\n            return() => {\n                abortController.abort()\n            }\n        }\n        fetchData()\n    }, [])\n    \n    function handleChange({target}) {\n        setCard({\n            ...card,\n            [target.name]: target.value\n        })\n    }\n\n    async function handleSubmit(event) {\n        event.preventDefault()\n        const abortController = new AbortController()\n        const response = await updateCard({...card}, abortController.signal)\n        history.push(`/decks/${deckId}`)\n        return response\n    }\n\n    async function handleCancel() {\n        history.push(`/decks/${deckId}`)\n    }\n\n\n    return (\n        <div>\n            <ol className=\"breadcrumb\">\n                <li className=\"breadcrumb-item\">\n                    <Link to=\"/\">\n                        Home\n                    </Link>\n                </li>\n                <li className=\"breadcrumb-item\">\n                    <Link to={`/decks/${deckId}`}>\n                        {deck.name}\n                    </Link>\n                </li>\n                <li className=\"breadcrumb-item active\">\n                    Edit Card {cardId}\n                </li>\n            </ol>\n            <form onSubmit={handleSubmit}>\n                <h2>\n                    Edit Card\n                </h2>\n                <div className=\"form-group\">\n                    <label>\n                        Front\n                    </label>\n                    <textarea \n                        id=\"front\"\n                        name=\"front\"\n                        className=\"form-control\"\n                        onChange={handleChange} \n                        type=\"text\"\n                        value={card.front}\n                    />\n                </div>\n                <div className=\"form-group\">\n                    <label>\n                        Back\n                    </label>\n                    <textarea \n                        id=\"back\"\n                        name=\"back\"\n                        className=\"form-control\"\n                        onChange={handleChange} \n                        type=\"text\"\n                        value={card.back}\n                    />\n                </div>\n                <button className=\"btn btn-secondary mx-1\" onClick={() => handleCancel()}>\n                    Cancel\n                </button>\n                <button className=\"btn btn-primary mx-1\" type=\"submit\">\n                    Save\n                </button>\n            </form>\n        </div>\n    )\n}\n\nexport default EditCard"]},"metadata":{},"sourceType":"module"}