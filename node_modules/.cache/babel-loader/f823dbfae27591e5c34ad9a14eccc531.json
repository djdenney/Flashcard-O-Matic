{"ast":null,"code":"import _regeneratorRuntime from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{listDecks,deleteDeck}from\"./utils/api/index\";import{Link,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var history=useHistory();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),decks=_useState2[0],setDecks=_useState2[1];useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var abortController,deckResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:abortController=new AbortController();_context.prev=1;_context.next=4;return listDecks(abortController.signal);case 4:deckResponse=_context.sent;setDecks(deckResponse);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.error('Something went wrong',_context.t0);case 11:return _context.abrupt(\"return\",function(){abortController.abort();});case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,8]]);}));return _fetchData.apply(this,arguments);}fetchData();},[]);function handleDelete(_x){return _handleDelete.apply(this,arguments);}function _handleDelete(){_handleDelete=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(deck){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm(\"Delete this deck? You will not be able to recover it\")){_context2.next=5;break;}history.go(0);_context2.next=4;return deleteDeck(deck.id);case 4:return _context2.abrupt(\"return\",_context2.sent);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDelete.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-secondary mb-2\",to:\"/decks/new\",children:\"Create Deck\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card-deck\",children:decks.map(function(deck){return/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{width:'30rem'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:\"\".concat(deck.name)}),/*#__PURE__*/_jsx(\"div\",{className:\"card-subtitle mb-2 text-muted\",children:\"\".concat(deck.cards.length,\" cards\")}),/*#__PURE__*/_jsx(\"div\",{className:\"card-text\",children:\"\".concat(deck.description)}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-secondary mx-1\",to:\"/decks/\".concat(deck.id),children:\"View\"}),/*#__PURE__*/_jsx(Link,{className:\"btn btn-primary mx-1\",to:\"/decks/\".concat(deck.id,\"/study\"),children:\"Study\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger mx-1\",onClick:function onClick(){return handleDelete(deck);},children:\"Delete\"})]})},deck.id);})})]});}export default Home;","map":{"version":3,"sources":["/Users/danieldenney/Thinkful/Qualified/Project_Flashcards_Qualified_1/src/Home.js"],"names":["React","useState","useEffect","listDecks","deleteDeck","Link","useHistory","Home","history","decks","setDecks","fetchData","abortController","AbortController","signal","deckResponse","console","error","abort","handleDelete","deck","window","confirm","go","id","map","width","name","cards","length","description"],"mappings":"ijBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,OAASC,SAAT,CAAoBC,UAApB,KAAsC,mBAAtC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,kBAAjC,C,wFAEA,QAASC,CAAAA,IAAT,EAAiB,CACb,GAAMC,CAAAA,OAAO,CAAGF,UAAU,EAA1B,CADa,cAEaL,QAAQ,CAAC,EAAD,CAFrB,wCAENQ,KAFM,eAECC,QAFD,eAIbR,SAAS,CAAE,UAAM,SACES,CAAAA,SADF,qIACb,oKACUC,eADV,CAC4B,GAAIC,CAAAA,eAAJ,EAD5B,uCAGmCV,CAAAA,SAAS,CAACS,eAAe,CAACE,MAAjB,CAH5C,QAGcC,YAHd,eAIQL,QAAQ,CAACK,YAAD,CAAR,CAJR,+EAMQC,OAAO,CAACC,KAAR,CAAc,sBAAd,cANR,wCAQU,UAAM,CACRL,eAAe,CAACM,KAAhB,GACH,CAVL,sEADa,4CAabP,SAAS,GACZ,CAdQ,CAcN,EAdM,CAAT,CAJa,QAoBEQ,CAAAA,YApBF,gJAoBb,kBAA4BC,IAA5B,0HACQC,MAAM,CAACC,OAAP,wDADR,0BAEQd,OAAO,CAACe,EAAR,CAAW,CAAX,EAFR,uBAGqBnB,CAAAA,UAAU,CAACgB,IAAI,CAACI,EAAN,CAH/B,iHApBa,+CA2Bb,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,KAAC,IAAD,EAAM,SAAS,CAAC,wBAAhB,CAAyC,EAAE,CAAC,YAA5C,yBADJ,cAII,YAAK,SAAS,CAAC,WAAf,UACKf,KAAK,CAACgB,GAAN,CAAU,SAACL,IAAD,CAAU,CACjB,mBACI,YAAK,SAAS,CAAC,MAAf,CAAsB,KAAK,CAAE,CAAEM,KAAK,CAAE,OAAT,CAA7B,uBACI,aAAK,SAAS,CAAC,WAAf,wBACI,YAAK,SAAS,CAAC,YAAf,oBACQN,IAAI,CAACO,IADb,GADJ,cAII,YAAK,SAAS,CAAC,+BAAf,oBACQP,IAAI,CAACQ,KAAL,CAAWC,MADnB,YAJJ,cAOI,YAAK,SAAS,CAAC,WAAf,oBACQT,IAAI,CAACU,WADb,GAPJ,cAUI,KAAC,IAAD,EAAM,SAAS,CAAC,wBAAhB,CAAyC,EAAE,kBAAYV,IAAI,CAACI,EAAjB,CAA3C,kBAVJ,cAaI,KAAC,IAAD,EAAM,SAAS,CAAC,sBAAhB,CAAuC,EAAE,kBAAYJ,IAAI,CAACI,EAAjB,UAAzC,mBAbJ,cAgBI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,qBAAhC,CAAsD,OAAO,CAAE,yBAAML,CAAAA,YAAY,CAACC,IAAD,CAAlB,EAA/D,oBAhBJ,GADJ,EAAqDA,IAAI,CAACI,EAA1D,CADJ,CAwBH,CAzBA,CADL,EAJJ,GADJ,CAmCH,CAED,cAAejB,CAAAA,IAAf","sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { listDecks, deleteDeck } from \"./utils/api/index\"\nimport { Link, useHistory } from \"react-router-dom\"\n\nfunction Home () {\n    const history = useHistory()\n    const [decks, setDecks] = useState([])\n    \n    useEffect (() => {\n        async function fetchData() {\n            const abortController = new AbortController()\n            try {\n                const deckResponse = await listDecks(abortController.signal)\n                setDecks(deckResponse)\n            } catch (error) {\n                console.error('Something went wrong', error)\n            }\n            return() => {\n                abortController.abort()\n            }\n        }\n        fetchData()\n    }, [])\n\n    async function handleDelete(deck) {\n        if (window.confirm(`Delete this deck? You will not be able to recover it`)) {\n            history.go(0)\n            return await deleteDeck(deck.id)\n        }\n    }\n\n    return (\n        <div className=\"container\">\n            <Link className=\"btn btn-secondary mb-2\" to=\"/decks/new\">\n                Create Deck\n            </Link>\n            <div className=\"card-deck\">\n                {decks.map((deck) => {\n                    return (\n                        <div className=\"card\" style={{ width: '30rem'}} key={deck.id}>\n                            <div className=\"card-body\">\n                                <div className=\"card-title\">\n                                    {`${deck.name}`}\n                                </div>\n                                <div className=\"card-subtitle mb-2 text-muted\">\n                                    {`${deck.cards.length} cards`}\n                                </div>\n                                <div className=\"card-text\">\n                                    {`${deck.description}`}\n                                </div>\n                                <Link className=\"btn btn-secondary mx-1\" to={`/decks/${deck.id}`}>\n                                    View\n                                </Link>\n                                <Link className=\"btn btn-primary mx-1\" to={`/decks/${deck.id}/study`}>\n                                    Study\n                                </Link>\n                                <button type=\"button\" className=\"btn btn-danger mx-1\" onClick={() => handleDelete(deck)}>\n                                    Delete\n                                </button>\n                             </div>\n                        </div>\n                    )\n                })}\n            </div>\n        </div>\n    )     \n}\n\nexport default Home"]},"metadata":{},"sourceType":"module"}